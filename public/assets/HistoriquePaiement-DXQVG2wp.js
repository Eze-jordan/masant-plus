import{c as u,m as d,e,t as i,h as C,j as q,v as E,f as V,F,D as I,g as f,r as c,E as g,o as D,n as m}from"./app-CAn8e8WT.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{U}from"./user-C2hEQr2X.js";import{c as B}from"./createLucideIcon-C-WkQ_Z3.js";/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=B("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),z={__name:"HistoriquePaiement",setup(L,{expose:s}){s();const a=c(""),t=c(null),b=c(!1),_=c(null),o=c([]),v=c(!0),w=c(null),S=g(()=>o.value.reduce((l,r)=>l+r.montant,0)),j=g(()=>a.value?o.value.filter(l=>{var r,n,p,y,P,k;return((r=l.first_name)==null?void 0:r.toLowerCase().includes(a.value.toLowerCase()))||((n=l.last_name)==null?void 0:n.toLowerCase().includes(a.value.toLowerCase()))||((p=l.email)==null?void 0:p.toLowerCase().includes(a.value.toLowerCase()))||((y=l.montant)==null?void 0:y.toString().includes(a.value.toLowerCase()))||((P=l.type)==null?void 0:P.toLowerCase().includes(a.value.toLowerCase()))||((k=l.date)==null?void 0:k.toLowerCase().includes(a.value.toLowerCase()))}):o.value);function M(l){t.value=t.value===l?null:l}function H(l){_.value={...l},b.value=!0,t.value=null}function N(l){confirm("Supprimer ce paiement ?")&&(o.value=o.value.filter(r=>r.id!==l.id)),t.value=null}async function h(){try{const l=await fetch("/paiements");if(!l.ok)throw new Error("Erreur de récupération des paiements");const r=await l.json();o.value=r.map(n=>({id:n.id,first_name:n.first_name??"",last_name:n.last_name??"Inconnu",email:n.email??"",montant:Number(n.montant)||0,type:n.type??"Non défini",date:new Date(n.datePaiement).toLocaleString("fr-FR"),profileImage:n.profileImage||"/doctor1.jpg"}))}catch(l){w.value=l.message}finally{v.value=!1}}D(()=>{h()});const x={search:a,openMenu:t,showDetails:b,selectedPaiement:_,paiements:o,loading:v,error:w,totalMontant:S,filteredPaiements:j,toggleMenu:M,voirPlus:H,supprimer:N,fetchPaiements:h,ref:c,computed:g,onMounted:D,get DollarSign(){return O},get User(){return U}};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}},A={class:"space-y-6"},R={class:"flex flex-col md:flex-row justify-between items-start md:items-center"},X={class:"mt-3 flex items-center gap-4"},G={class:"border border-blue-400 rounded-lg p-4 flex items-center justify-between w-64 bg-white"},J={class:"text-2xl font-bold text-black"},K={class:"flex items-center justify-center w-12 h-12 rounded-full border-2 border-blue-400"},Q={class:"mt-4 md:mt-0"},W={class:"bg-white rounded-lg shadow overflow-auto"},Y={class:"w-48 font-bold flex items-center gap-2"},Z=["src"],$={class:"w-32 text-gray-600"},ee={class:"w-56 text-gray-600"},te={class:"w-32 text-gray-600"},se={class:"w-32 text-gray-600"},oe={class:"w-48 text-gray-600"},le={class:"w-10 text-right relative"},ie=["onClick"],ne={key:0,class:"absolute right-0 mt-2 w-32 bg-white border rounded shadow z-10"},ae=["onClick"],re=["onClick"],de={key:0,class:"fixed inset-0 z-50 flex"},ce={class:"w-full max-w-md h-full bg-white shadow-lg p-8 relative animate-slide-in-right overflow-y-auto"},ue={key:0},me={class:"mb-4 flex flex-col items-center"},ve=["src"],fe={class:"font-bold text-xl"},be={class:"mb-2"},_e={class:"mb-2"},ge={class:"mb-2"},we={class:"mb-2"};function he(L,s,a,t,b,_){return m(),u("div",A,[d(" En-tête "),e("div",R,[e("div",null,[s[4]||(s[4]=e("h2",{class:"text-2xl font-bold text-gray-800"},"Historique des Paiements",-1)),e("div",X,[e("div",G,[e("div",null,[s[3]||(s[3]=e("div",{class:"text-gray-500 text-sm mb-1"},"Revenus",-1)),e("div",J," XAF "+i(t.totalMontant.toLocaleString()),1)]),e("div",K,[C(t.DollarSign,{class:"w-7 h-7 text-blue-400"})])])])]),d(" Barre de recherche "),e("div",Q,[q(e("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>t.search=o),type:"text",placeholder:" Rechercher une transaction...",class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm w-72 focus:outline-none focus:ring-2 focus:ring-blue-400"},null,512),[[E,t.search]])])]),d(" Tableau des paiements "),e("div",W,[s[6]||(s[6]=V('<div class="bg-blue-100 px-6 py-3 font-semibold text-gray-700 flex items-center border-b"><div class="w-10"></div><div class="w-48">Nom</div><div class="w-32">Prénom</div><div class="w-56">Email</div><div class="w-32">Montant</div><div class="w-32">Type</div><div class="w-48">Date transaction</div><div class="w-10 text-right"></div></div>',1)),(m(!0),u(F,null,I(t.filteredPaiements,o=>(m(),u("div",{key:o.id,class:"flex items-center px-6 py-3 border-b bg-white hover:bg-blue-50 relative"},[s[5]||(s[5]=e("input",{type:"checkbox",class:"mr-4 cursor-pointer"},null,-1)),e("div",Y,[e("img",{src:o.profileImage||"/doctor1.jpg",class:"w-8 h-8 rounded-full object-cover"},null,8,Z),C(t.User,{class:"w-5 h-5 text-blue-500"}),f(" Dr. "+i(o.first_name),1)]),e("div",$,i(o.last_name),1),e("div",ee,i(o.email),1),e("div",te,i(o.montant.toLocaleString())+" XAF",1),e("div",se,i(o.type),1),e("div",oe,i(o.date),1),d(" Menu contextuel "),e("div",le,[e("button",{onClick:v=>t.toggleMenu(o.id),class:"px-2 py-1 rounded hover:bg-gray-200",title:"Options"}," ⋮ ",8,ie),t.openMenu===o.id?(m(),u("div",ne,[e("ul",null,[e("li",{class:"px-4 py-2 hover:bg-blue-100 cursor-pointer",onClick:v=>t.voirPlus(o)}," Voir plus ",8,ae),e("li",{class:"px-4 py-2 hover:bg-red-100 text-red-600 cursor-pointer",onClick:v=>t.supprimer(o)}," Supprimer ",8,re)])])):d("v-if",!0)])]))),128))]),d(" Panneau latéral Détails paiement "),t.showDetails?(m(),u("div",de,[e("div",{class:"flex-1 bg-black bg-opacity-40",onClick:s[1]||(s[1]=o=>t.showDetails=!1)}),e("div",ce,[e("button",{class:"absolute top-2 right-2 text-gray-500",onClick:s[2]||(s[2]=o=>t.showDetails=!1)},"×"),s[11]||(s[11]=e("h3",{class:"text-lg font-bold mb-4 text-blue-700"},"Détails du paiement",-1)),t.selectedPaiement?(m(),u("div",ue,[e("div",me,[e("img",{src:t.selectedPaiement.profileImage||"/doctor1.jpg",class:"w-24 h-24 rounded-full object-cover mb-2"},null,8,ve),e("span",fe,"Dr. "+i(t.selectedPaiement.nom)+" "+i(t.selectedPaiement.prenom),1)]),e("div",be,[s[7]||(s[7]=e("b",null,"Email :",-1)),f(" "+i(t.selectedPaiement.email),1)]),e("div",_e,[s[8]||(s[8]=e("b",null,"Montant :",-1)),f(" "+i(t.selectedPaiement.montant.toLocaleString())+" XAF",1)]),e("div",ge,[s[9]||(s[9]=e("b",null,"Type :",-1)),f(" "+i(t.selectedPaiement.type),1)]),e("div",we,[s[10]||(s[10]=e("b",null,"Date transaction :",-1)),f(" "+i(t.selectedPaiement.date),1)])])):d("v-if",!0)])])):d("v-if",!0)])}const xe=T(z,[["render",he],["__file","D:/sambatechpro/masanteplus-back/inertia/pages/dashboard/HistoriquePaiement.vue"]]),Ce=Object.freeze(Object.defineProperty({__proto__:null,default:xe},Symbol.toStringTag,{value:"Module"}));export{O as D,xe as H,Ce as a};
