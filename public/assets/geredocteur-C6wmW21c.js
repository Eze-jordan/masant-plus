import{b as C,c,e as i,n,f as e,i as L,t as o,k as P,v as E,F as T,D as j,h as p,r as y,E as _,o as S}from"./app-CXM1-jq5.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";const M={__name:"geredocteur",setup(A,{expose:t}){t();const b=y([]),s=y(""),h=_(()=>b.value.length),m=y(!1),u=y(null);function r(l){u.value=l,m.value=!0}function f(){m.value=!1,u.value=null}S(async()=>{try{const l=await fetch("/alldoctors");if(!l.ok)throw new Error("Erreur lors de la récupération des docteurs");const d=await l.json();console.log(d);const g=a=>a&&(a.type==="doctor"||a.role==="doctor"||a.accountType==="doctor"||a.isDoctor===!0);b.value=d.filter(g).map(a=>({phone:"",specialisation:"",licenseNumber:"",accountStatus:"Pending",...a}))}catch(l){console.error(l)}});const k=_(()=>{const l=s.value.toLowerCase();return b.value.filter(d=>{var g,a,v,D,w,N;return((g=d.firstName)==null?void 0:g.toLowerCase().includes(l))||((a=d.lastName)==null?void 0:a.toLowerCase().includes(l))||((v=d.email)==null?void 0:v.toLowerCase().includes(l))||((D=d.licenseNumber)==null?void 0:D.toLowerCase().includes(l))||((w=d.phone)==null?void 0:w.toLowerCase().includes(l))||((N=d.specialisation)==null?void 0:N.toLowerCase().includes(l))})}),x={docteurs:b,search:s,totalDocteurs:h,showSidebar:m,selectedDoctor:u,openSidebar:r,closeSidebar:f,filteredDocteurs:k,ref:y,computed:_,onMounted:S};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}},B={class:"flex justify-between items-center mb-6"},I={class:"mt-2 flex items-center gap-4"},F={class:"bg-white rounded shadow p-4 flex items-center gap-2"},q={class:"font-bold text-2xl"},z={class:"flex items-center gap-4"},G={class:"bg-white rounded shadow p-4"},O={class:"w-full text-left border-collapse border border-gray-200"},R={class:"py-2 px-2 border border-gray-200"},U={class:"py-2 px-2 border border-gray-200"},H={class:"py-2 px-2 border border-gray-200"},J={class:"py-2 px-2 border border-gray-200"},K={class:"py-2 px-2 border border-gray-200"},Q={class:"py-2 px-2 border border-gray-200"},W={class:"py-2 px-2 border border-gray-200"},X={class:"py-2 px-2 border border-gray-200"},Y=["onClick"],Z={key:0},$={key:0,class:"fixed inset-0 z-40"},ee={class:"absolute right-0 top-0 h-full w-96 bg-white shadow-lg p-6 overflow-auto"},te={key:0},se={class:"flex items-center gap-4 mb-4"},oe={class:"w-16 h-16 bg-gray-100 rounded-full overflow-hidden flex items-center justify-center"},re=["src"],le={key:1,class:"text-gray-500"},ae={class:"font-bold text-lg"},ne={class:"text-sm text-gray-500"},de={class:"mb-2"},ce={class:"mb-2"},ie={class:"mb-2"},pe={class:"mb-2"},be={class:"mb-2"},ue={class:"mb-2"},ye={class:"mb-2"},me={key:1,class:"text-gray-500"};function ge(A,t,b,s,h,m){const u=C("Stethoscope");return i(),c("div",null,[n(" En-tête "),e("div",B,[e("div",null,[t[1]||(t[1]=e("h2",{class:"text-xl font-bold"},"Paramètre des médecins",-1)),e("div",I,[e("div",F,[e("span",q,o(s.totalDocteurs),1),L(u,{class:"w-6 h-6 text-blue-500"})])])]),e("div",z,[P(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>s.search=r),type:"text",placeholder:"Rechercher un Docteur par Matricule, nom, etc.",class:"px-4 py-2 border rounded-md"},null,512),[[E,s.search]])])]),n(" Tableau des docteurs "),e("div",G,[t[5]||(t[5]=e("h3",{class:"font-bold mb-4"},"Liste des docteurs et spécialités",-1)),e("table",O,[t[4]||(t[4]=e("thead",null,[e("tr",{class:"border-b bg-gray-100"},[e("th",{class:"py-2 px-2 border border-gray-200"},"Nom"),e("th",{class:"py-2 px-2 border border-gray-200"},"Prénom"),e("th",{class:"py-2 px-2 border border-gray-200"},"Email"),e("th",{class:"py-2 px-2 border border-gray-200"},"Téléphone"),e("th",{class:"py-2 px-2 border border-gray-200"},"Spécialité"),e("th",{class:"py-2 px-2 border border-gray-200"},"Matricule"),e("th",{class:"py-2 px-2 border border-gray-200"},"Statut"),e("th",{class:"py-2 px-2 border border-gray-200"},"Actions")])],-1)),e("tbody",null,[(i(!0),c(T,null,j(s.filteredDocteurs,r=>(i(),c("tr",{key:r.id,class:"hover:bg-gray-50"},[e("td",R,o(r.lastName||"N/A"),1),e("td",U,o(r.firstName||"N/A"),1),e("td",H,o(r.email||"N/A"),1),e("td",J,o(r.phone||"N/A"),1),e("td",K,o(r.specialisation||"N/A"),1),e("td",Q,o(r.licenseNumber||"N/A"),1),e("td",W,o(r.accountStatus||"Pending"),1),e("td",X,[n(" Trois points ouvrant la sidebar "),e("button",{class:"px-2 py-1 rounded hover:bg-gray-100","aria-label":"Plus d'actions",onClick:f=>s.openSidebar(r)},[n(" simple ellipsis "),t[2]||(t[2]=e("span",{class:"text-xl"},"⋯",-1))],8,Y)])]))),128)),s.filteredDocteurs.length===0?(i(),c("tr",Z,t[3]||(t[3]=[e("td",{colspan:"8",class:"py-4 text-center text-gray-500"},"Aucun docteur trouvé.",-1)]))):n("v-if",!0)])])]),n(" Sidebar: détails du docteur "),s.showSidebar?(i(),c("div",$,[n(" overlay "),e("div",{class:"absolute inset-0 bg-black opacity-40",onClick:s.closeSidebar}),n(" panel "),e("aside",ee,[e("div",{class:"flex justify-between items-center mb-4"},[t[6]||(t[6]=e("h4",{class:"text-lg font-bold"},"Détails du docteur",-1)),e("button",{class:"text-gray-500 hover:text-gray-800",onClick:s.closeSidebar},"✕")]),s.selectedDoctor?(i(),c("div",te,[n(" Profile image "),e("div",se,[e("div",oe,[s.selectedDoctor.profileImage?(i(),c("img",{key:0,src:s.selectedDoctor.profileImage,alt:"profile",class:"w-full h-full object-cover"},null,8,re)):(i(),c("span",le,"No Image"))]),e("div",null,[e("h5",ae,o(s.selectedDoctor.name||`${s.selectedDoctor.firstName||""} ${s.selectedDoctor.lastName||""}`.trim()||"N/A"),1),e("div",ne,o(s.selectedDoctor.type||s.selectedDoctor.role||"N/A"),1)])]),e("p",de,[t[7]||(t[7]=e("strong",null,"Email :",-1)),p(" "+o(s.selectedDoctor.email||"N/A"),1)]),e("p",ce,[t[8]||(t[8]=e("strong",null,"Adresse :",-1)),p(" "+o(s.selectedDoctor.address||"N/A"),1)]),e("p",ie,[t[9]||(t[9]=e("strong",null,"Téléphone :",-1)),p(" "+o(s.selectedDoctor.phone||"N/A"),1)]),e("p",pe,[t[10]||(t[10]=e("strong",null,"Spécialité :",-1)),p(" "+o(s.selectedDoctor.specialisation||s.selectedDoctor.specialty||"N/A"),1)]),e("p",be,[t[11]||(t[11]=e("strong",null,"Année d'expérience :",-1)),p(" "+o(s.selectedDoctor.annee_experience??"N/A"),1)]),e("p",ue,[t[12]||(t[12]=e("strong",null,"À propos :",-1)),p(" "+o(s.selectedDoctor.about||"N/A"),1)]),e("p",ye,[t[13]||(t[13]=e("strong",null,"Statut :",-1)),p(" "+o(s.selectedDoctor.accountStatus||"Pending"),1)]),t[14]||(t[14]=e("div",{class:"mt-4"},null,-1))])):(i(),c("div",me,"Aucun docteur sélectionné."))])])):n("v-if",!0)])}const fe=V(M,[["render",ge],["__file","D:/sambatechpro/masanteplus-back/inertia/pages/dashboard/geredocteur.vue"]]);export{fe as default};
