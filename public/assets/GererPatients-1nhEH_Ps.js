import{r,A as g,c as u,a as b,l as f,b as e,g as T,t as d,i,v as n,F as G,D as I,h as U,G as V,f as x}from"./app-x1sq7EG_.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{U as B}from"./user-ljB9qe0M.js";import"./createLucideIcon-VhxeWsbk.js";const O={__name:"GererPatients",props:{user:Object,users:{type:Array,required:!0,default:()=>[]}},setup(k,{expose:t}){t();const y=k,l=r(""),m=r(null),c=r(!1),s=r(null),p=r(!1),P=r(!1),w=r({firstName:"",lastName:"",phone:"",email:"",adresse:"",accountStatus:"active"}),a=r([...y.users]);console.log("boulingui",a.value);const _=g(()=>a.value.length),A=g(()=>l.value?a.value.filter(o=>{var v,C,N,F,S;return((v=o.lastName)==null?void 0:v.toLowerCase().includes(l.value.toLowerCase()))||((C=o.firstName)==null?void 0:C.toLowerCase().includes(l.value.toLowerCase()))||((N=o.phone)==null?void 0:N.toLowerCase().includes(l.value.toLowerCase()))||((F=o.email)==null?void 0:F.toLowerCase().includes(l.value.toLowerCase()))||((S=o.adresse)==null?void 0:S.toLowerCase().includes(l.value.toLowerCase()))}):a.value);function L(o){m.value=m.value===o?null:o}function M(o){s.value={...o},c.value=!0,p.value=!1,m.value=null}function q(o){s.value={...o},c.value=!0,p.value=!0,m.value=null}function E(o){confirm("Supprimer "+o.lastName+" ?")&&(a.value=a.value.filter(v=>v.id!==o.id)),m.value=null}function j(){const o=a.value.findIndex(v=>v.id===s.value.id);o!==-1&&(a.value[o]={...s.value}),c.value=!1}function D(){const o={...w.value,id:Date.now()};a.value.push(o),P.value=!1,w.value={firstName:"",lastName:"",phone:"",email:"",adresse:"",accountStatus:"active"}}const h={props:y,search:l,openMenu:m,showDetails:c,selectedPatient:s,isEditing:p,showAddForm:P,addForm:w,patients:a,totalPatients:_,filteredPatients:A,toggleMenu:L,voirPlus:M,modifier:q,supprimer:E,enregistrerModif:j,ajouterPatient:D,ref:r,computed:g,get User(){return B}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}},H={class:"flex justify-between items-center mb-6"},R={class:"mt-2 flex items-center gap-4"},J={class:"bg-white rounded shadow p-4 flex items-center gap-2"},K={class:"font-bold text-2xl"},Q={class:"flex items-center gap-4"},W={class:"bg-white rounded shadow p-4"},X={class:"w-full text-left"},Y={class:"py-2 px-2 font-bold"},Z={class:"py-2 px-2"},$={class:"py-2 px-2"},ee={class:"py-2 px-2"},te={class:"py-2 px-2"},le={class:"py-2 px-2 relative"},se=["onClick"],oe={key:0,class:"absolute right-0 mt-2 w-32 bg-white border rounded shadow z-10"},de=["onClick"],ie=["onClick"],ne=["onClick"],ae={key:0,class:"fixed inset-0 z-50 flex"},re={class:"w-full max-w-md h-full bg-white shadow-lg p-8 relative animate-slide-in-right overflow-y-auto"},ue={class:"text-lg font-bold mb-4"},be={class:"mb-4"},me={class:"mb-4"},pe={class:"mb-4"},fe={class:"mb-4"},ve={class:"mb-4"},ce={class:"mb-4"},xe={key:1},ye={class:"mb-4 flex flex-col items-center"},we={class:"font-bold text-xl"},ge={class:"mb-2"},ke={class:"mb-2"},Pe={class:"mb-2"},he={class:"mb-2"},Ce={key:1,class:"fixed inset-0 z-50 flex"},Ne={class:"w-full max-w-md h-full bg-white shadow-lg p-8 relative animate-slide-in-right overflow-y-auto"},Fe={class:"mb-4"},Se={class:"mb-4"},Ue={class:"mb-4"},Ve={class:"mb-4"},_e={class:"mb-4"},Ae={class:"mb-4"};function Le(k,t,y,l,m,c){return b(),u("div",null,[f(" En-tête "),e("div",H,[e("div",null,[t[19]||(t[19]=e("h2",{class:"text-xl font-bold"},"Paramètre des patients",-1)),e("div",R,[e("div",J,[e("span",K,d(l.totalPatients),1),T(l.User,{class:"w-6 h-6 text-blue-500"})])])]),e("div",Q,[i(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.search=s),type:"text",placeholder:"Rechercher un patient",class:"px-4 py-2 border rounded-md"},null,512),[[n,l.search]]),e("button",{class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 font-bold",onClick:t[1]||(t[1]=s=>l.showAddForm=!0)}," + Ajouter un patient ")])]),f(" Tableau des patients "),e("div",W,[t[22]||(t[22]=e("h3",{class:"font-bold mb-4"},"Liste des patients",-1)),e("table",X,[t[21]||(t[21]=e("thead",null,[e("tr",{class:"border-b"},[e("th",{class:"py-2 px-2"},[e("input",{type:"checkbox"})]),e("th",{class:"py-2 px-2"},"Nom"),e("th",{class:"py-2 px-2"},"Prénom"),e("th",{class:"py-2 px-2"},"Téléphone"),e("th",{class:"py-2 px-2"},"Email"),e("th",{class:"py-2 px-2"},"Adresse"),e("th",{class:"py-2 px-2"})])],-1)),e("tbody",null,[(b(!0),u(G,null,I(l.filteredPatients,s=>(b(),u("tr",{key:s.id,class:"border-b hover:bg-gray-100"},[t[20]||(t[20]=e("td",{class:"py-2 px-2"},[e("input",{type:"checkbox"})],-1)),e("td",Y,d(s.lastName),1),e("td",Z,d(s.firstName),1),e("td",$,d(s.phone),1),e("td",ee,d(s.email),1),e("td",te,d(s.adresse),1),e("td",le,[e("button",{onClick:p=>l.toggleMenu(s.id),class:"px-2 py-1 rounded hover:bg-gray-200"},"...",8,se),l.openMenu===s.id?(b(),u("div",oe,[e("ul",null,[e("li",{class:"px-4 py-2 hover:bg-blue-100 cursor-pointer",onClick:p=>l.voirPlus(s)},"Voir plus",8,de),e("li",{class:"px-4 py-2 hover:bg-blue-100 cursor-pointer",onClick:p=>l.modifier(s)},"Modifier",8,ie),e("li",{class:"px-4 py-2 hover:bg-red-100 text-red-600 cursor-pointer",onClick:p=>l.supprimer(s)},"Supprimer",8,ne)])])):f("v-if",!0)])]))),128))])])]),f(" Panneau latéral détails/modif "),l.showDetails?(b(),u("div",ae,[e("div",{class:"flex-1 bg-black bg-opacity-40",onClick:t[2]||(t[2]=s=>l.showDetails=!1)}),e("div",re,[e("button",{class:"absolute top-2 right-2 text-gray-500",onClick:t[3]||(t[3]=s=>l.showDetails=!1)},"×"),e("h3",ue,d(l.isEditing?"Modifier le patient":"Détails du patient"),1),l.isEditing?(b(),u("form",{key:0,onSubmit:U(l.enregistrerModif,["prevent"])},[e("div",be,[t[23]||(t[23]=e("label",{class:"block mb-1"},"Nom",-1)),i(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.selectedPatient.lastName=s),type:"text",class:"w-full border rounded px-3 py-2",required:""},null,512),[[n,l.selectedPatient.lastName]])]),e("div",me,[t[24]||(t[24]=e("label",{class:"block mb-1"},"Prénom",-1)),i(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l.selectedPatient.firstName=s),type:"text",class:"w-full border rounded px-3 py-2",required:""},null,512),[[n,l.selectedPatient.firstName]])]),e("div",pe,[t[25]||(t[25]=e("label",{class:"block mb-1"},"Téléphone",-1)),i(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>l.selectedPatient.phone=s),type:"text",class:"w-full border rounded px-3 py-2",required:""},null,512),[[n,l.selectedPatient.phone]])]),e("div",fe,[t[26]||(t[26]=e("label",{class:"block mb-1"},"Email",-1)),i(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>l.selectedPatient.email=s),type:"email",class:"w-full border rounded px-3 py-2",required:""},null,512),[[n,l.selectedPatient.email]])]),e("div",ve,[t[27]||(t[27]=e("label",{class:"block mb-1"},"Adresse",-1)),i(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>l.selectedPatient.adresse=s),type:"text",class:"w-full border rounded px-3 py-2"},null,512),[[n,l.selectedPatient.adresse]])]),e("div",ce,[t[29]||(t[29]=e("label",{class:"block mb-1"},"Statut",-1)),i(e("select",{"onUpdate:modelValue":t[9]||(t[9]=s=>l.selectedPatient.accountStatus=s),class:"w-full border rounded px-3 py-2",required:""},t[28]||(t[28]=[e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)]),512),[[V,l.selectedPatient.accountStatus]])]),t[30]||(t[30]=e("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 font-bold w-full"}," Enregistrer ",-1))],32)):(b(),u("div",xe,[e("div",ye,[e("span",we,d(l.selectedPatient.lastName)+" "+d(l.selectedPatient.firstName),1)]),e("div",ge,[t[31]||(t[31]=e("b",null,"Téléphone :",-1)),x(" "+d(l.selectedPatient.phone),1)]),e("div",ke,[t[32]||(t[32]=e("b",null,"Email :",-1)),x(" "+d(l.selectedPatient.email),1)]),e("div",Pe,[t[33]||(t[33]=e("b",null,"Adresse :",-1)),x(" "+d(l.selectedPatient.adresse),1)]),e("div",he,[t[34]||(t[34]=e("b",null,"Statut :",-1)),x(" "+d(l.selectedPatient.accountStatus),1)]),e("button",{class:"mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 font-bold w-full",onClick:t[10]||(t[10]=s=>l.isEditing=!0)}," Modifier ")]))])])):f("v-if",!0),f(" Formulaire ajout "),l.showAddForm?(b(),u("div",Ce,[e("div",{class:"flex-1 bg-black bg-opacity-40",onClick:t[11]||(t[11]=s=>l.showAddForm=!1)}),e("div",Ne,[e("button",{class:"absolute top-2 right-2 text-gray-500",onClick:t[12]||(t[12]=s=>l.showAddForm=!1)},"×"),t[43]||(t[43]=e("h3",{class:"text-lg font-bold mb-4"},"Ajouter un patient",-1)),e("form",{onSubmit:U(l.ajouterPatient,["prevent"])},[e("div",Fe,[t[35]||(t[35]=e("label",{class:"block mb-1"},"Nom",-1)),i(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>l.addForm.lastName=s),type:"text",class:"w-full border rounded px-3 py-2",required:""},null,512),[[n,l.addForm.lastName]])]),e("div",Se,[t[36]||(t[36]=e("label",{class:"block mb-1"},"Prénom",-1)),i(e("input",{"onUpdate:modelValue":t[14]||(t[14]=s=>l.addForm.firstName=s),type:"text",class:"w-full border rounded px-3 py-2",required:""},null,512),[[n,l.addForm.firstName]])]),e("div",Ue,[t[37]||(t[37]=e("label",{class:"block mb-1"},"Téléphone",-1)),i(e("input",{"onUpdate:modelValue":t[15]||(t[15]=s=>l.addForm.phone=s),type:"text",class:"w-full border rounded px-3 py-2",required:""},null,512),[[n,l.addForm.phone]])]),e("div",Ve,[t[38]||(t[38]=e("label",{class:"block mb-1"},"Email",-1)),i(e("input",{"onUpdate:modelValue":t[16]||(t[16]=s=>l.addForm.email=s),type:"email",class:"w-full border rounded px-3 py-2",required:""},null,512),[[n,l.addForm.email]])]),e("div",_e,[t[39]||(t[39]=e("label",{class:"block mb-1"},"Adresse",-1)),i(e("input",{"onUpdate:modelValue":t[17]||(t[17]=s=>l.addForm.adresse=s),type:"text",class:"w-full border rounded px-3 py-2"},null,512),[[n,l.addForm.adresse]])]),e("div",Ae,[t[41]||(t[41]=e("label",{class:"block mb-1"},"Statut",-1)),i(e("select",{"onUpdate:modelValue":t[18]||(t[18]=s=>l.addForm.accountStatus=s),class:"w-full border rounded px-3 py-2",required:""},t[40]||(t[40]=[e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)]),512),[[V,l.addForm.accountStatus]])]),t[42]||(t[42]=e("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 font-bold w-full"}," Ajouter ",-1))],32)])])):f("v-if",!0)])}const De=z(O,[["render",Le],["__scopeId","data-v-17303a32"],["__file","C:/Users/HP/masanteplus-back/inertia/pages/dashboard/GererPatients.vue"]]);export{De as default};
