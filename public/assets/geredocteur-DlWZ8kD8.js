import{b as P,c,m as d,e,h as T,t as r,j as V,v as B,F as M,D as z,g as b,B as C,r as m,E as x,o as k,u as L,n as i}from"./app-CaZ2Mw_6.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";const U={__name:"geredocteur",setup(j,{expose:t}){t();const p=m([]),o=m(""),_=x(()=>p.value.length),y=m(!1),u=m(null);function l(s){u.value=s,y.value=!0}function v(){y.value=!1,u.value=null}const E=s=>{const a=(s==null?void 0:s.toLowerCase())||"";return a==="approved"||a==="active"?"bg-green-100 text-green-700 border border-green-300":a==="pending"?"bg-yellow-100 text-yellow-700 border border-yellow-300":a==="rejected"||a==="blocked"?"bg-red-100 text-red-700 border border-red-300":"bg-gray-200 text-gray-600 border border-gray-300"};async function h(){try{const s=await fetch("/alldoctors");if(!s.ok)throw new Error("Erreur lors de la récupération des docteurs");const a=await s.json(),f=n=>n&&(n.type==="doctor"||n.role==="doctor"||n.accountType==="doctor"||n.isDoctor===!0);p.value=a.filter(f).map(n=>({phone:"",specialisation:"",licenseNumber:"",accountStatus:"Pending",...n}))}catch(s){console.error("Erreur de chargement :",s)}}let g=null;k(()=>{h(),g=setInterval(()=>{h()},15e3)}),L(()=>{g&&clearInterval(g)});const I=x(()=>{const s=o.value.toLowerCase();return p.value.filter(a=>{var f,n,D,N,S,A;return((f=a.firstName)==null?void 0:f.toLowerCase().includes(s))||((n=a.lastName)==null?void 0:n.toLowerCase().includes(s))||((D=a.email)==null?void 0:D.toLowerCase().includes(s))||((N=a.licenseNumber)==null?void 0:N.toLowerCase().includes(s))||((S=a.phone)==null?void 0:S.toLowerCase().includes(s))||((A=a.specialisation)==null?void 0:A.toLowerCase().includes(s))})}),w={docteurs:p,search:o,totalDocteurs:_,showSidebar:y,selectedDoctor:u,openSidebar:l,closeSidebar:v,getStatusClass:E,fetchDoctors:h,get refreshInterval(){return g},set refreshInterval(s){g=s},filteredDocteurs:I,ref:m,computed:x,onMounted:k,onUnmounted:L};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}},q={class:"flex justify-between items-center mb-6"},G={class:"mt-2 flex items-center gap-4"},O={class:"bg-white rounded shadow p-4 flex items-center gap-2"},R={class:"font-bold text-2xl"},H={class:"flex items-center gap-4"},J={class:"bg-white rounded shadow p-4"},K={class:"w-full text-left border-collapse border border-gray-200"},Q={class:"py-2 px-2 border border-gray-200"},W={class:"py-2 px-2 border border-gray-200"},X={class:"py-2 px-2 border border-gray-200"},Y={class:"py-2 px-2 border border-gray-200"},Z={class:"py-2 px-2 border border-gray-200"},$={class:"py-2 px-2 border border-gray-200"},ee={class:"py-2 px-2 border border-gray-200"},te={class:"py-2 px-2 border border-gray-200"},oe=["onClick"],se={key:0},re={key:0,class:"fixed inset-0 z-40"},le={class:"absolute right-0 top-0 h-full w-96 bg-white shadow-lg p-6 overflow-auto"},ae={key:0},ne={class:"flex items-center gap-4 mb-4"},de={class:"w-16 h-16 bg-gray-100 rounded-full overflow-hidden flex items-center justify-center"},ce=["src"],ie={key:1,class:"text-gray-500"},be={class:"font-bold text-lg"},pe={class:"text-sm text-gray-500"},ue={class:"mb-2"},ge={class:"mb-2"},me={class:"mb-2"},ye={class:"mb-2"},fe={class:"mb-2"},he={class:"mb-2"},xe={class:"mb-2 flex items-center gap-2"},_e={key:1,class:"text-gray-500"};function ve(j,t,p,o,_,y){const u=P("Stethoscope");return i(),c("div",null,[d(" En-tête "),e("div",q,[e("div",null,[t[1]||(t[1]=e("h2",{class:"text-xl font-bold"},"Paramètre des médecins",-1)),e("div",G,[e("div",O,[e("span",R,r(o.totalDocteurs),1),T(u,{class:"w-6 h-6 text-blue-500"})])])]),e("div",H,[V(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>o.search=l),type:"text",placeholder:"Rechercher un Docteur par Matricule, nom, etc.",class:"px-4 py-2 border rounded-md"},null,512),[[B,o.search]])])]),d(" Tableau des docteurs "),e("div",J,[t[5]||(t[5]=e("h3",{class:"font-bold mb-4"},"Liste des docteurs et spécialités",-1)),e("table",K,[t[4]||(t[4]=e("thead",null,[e("tr",{class:"border-b bg-gray-100"},[e("th",{class:"py-2 px-2 border border-gray-200"},"Nom"),e("th",{class:"py-2 px-2 border border-gray-200"},"Prénom"),e("th",{class:"py-2 px-2 border border-gray-200"},"Email"),e("th",{class:"py-2 px-2 border border-gray-200"},"Téléphone"),e("th",{class:"py-2 px-2 border border-gray-200"},"Spécialité"),e("th",{class:"py-2 px-2 border border-gray-200"},"Matricule"),e("th",{class:"py-2 px-2 border border-gray-200"},"Statut"),e("th",{class:"py-2 px-2 border border-gray-200"},"Actions")])],-1)),e("tbody",null,[(i(!0),c(M,null,z(o.filteredDocteurs,l=>(i(),c("tr",{key:l.id,class:"hover:bg-gray-50"},[e("td",Q,r(l.lastName||"N/A"),1),e("td",W,r(l.firstName||"N/A"),1),e("td",X,r(l.email||"N/A"),1),e("td",Y,r(l.phone||"N/A"),1),e("td",Z,r(l.specialisation||"N/A"),1),e("td",$,r(l.licenseNumber||"N/A"),1),e("td",ee,[e("span",{class:C(["px-3 py-1 rounded-full text-sm font-semibold",o.getStatusClass(l.accountStatus)])},r(l.accountStatus||"Pending"),3)]),e("td",te,[d(" Trois points ouvrant la sidebar "),e("button",{class:"px-2 py-1 rounded hover:bg-gray-100","aria-label":"Plus d'actions",onClick:v=>o.openSidebar(l)},[d(" simple ellipsis "),t[2]||(t[2]=e("span",{class:"text-xl"},"⋯",-1))],8,oe)])]))),128)),o.filteredDocteurs.length===0?(i(),c("tr",se,[...t[3]||(t[3]=[e("td",{colspan:"8",class:"py-4 text-center text-gray-500"},"Aucun docteur trouvé.",-1)])])):d("v-if",!0)])])]),d(" Sidebar: détails du docteur "),o.showSidebar?(i(),c("div",re,[d(" overlay "),e("div",{class:"absolute inset-0 bg-black opacity-40",onClick:o.closeSidebar}),d(" panel "),e("aside",le,[e("div",{class:"flex justify-between items-center mb-4"},[t[6]||(t[6]=e("h4",{class:"text-lg font-bold"},"Détails du docteur",-1)),e("button",{class:"text-gray-500 hover:text-gray-800",onClick:o.closeSidebar},"✕")]),o.selectedDoctor?(i(),c("div",ae,[d(" Profile image "),e("div",ne,[e("div",de,[o.selectedDoctor.profileImage?(i(),c("img",{key:0,src:o.selectedDoctor.profileImage,alt:"profile",class:"w-full h-full object-cover"},null,8,ce)):(i(),c("span",ie,"No Image"))]),e("div",null,[e("h5",be,r(o.selectedDoctor.name||`${o.selectedDoctor.firstName||""} ${o.selectedDoctor.lastName||""}`.trim()||"N/A"),1),e("div",pe,r(o.selectedDoctor.type||o.selectedDoctor.role||"N/A"),1)])]),e("p",ue,[t[7]||(t[7]=e("strong",null,"Email :",-1)),b(" "+r(o.selectedDoctor.email||"N/A"),1)]),e("p",ge,[t[8]||(t[8]=e("strong",null,"Adresse :",-1)),b(" "+r(o.selectedDoctor.address||"N/A"),1)]),e("p",me,[t[9]||(t[9]=e("strong",null,"Téléphone :",-1)),b(" "+r(o.selectedDoctor.phone||"N/A"),1)]),e("p",ye,[t[10]||(t[10]=e("strong",null,"Spécialité :",-1)),b(" "+r(o.selectedDoctor.specialisation||o.selectedDoctor.specialty||"N/A"),1)]),e("p",fe,[t[11]||(t[11]=e("strong",null,"Année d'expérience :",-1)),b(" "+r(o.selectedDoctor.annee_experience??"N/A"),1)]),e("p",he,[t[12]||(t[12]=e("strong",null,"À propos :",-1)),b(" "+r(o.selectedDoctor.about||"N/A"),1)]),e("p",xe,[t[13]||(t[13]=e("strong",null,"Statut :",-1)),e("span",{class:C(["px-3 py-1 rounded-full text-sm font-semibold",o.getStatusClass(o.selectedDoctor.accountStatus)])},r(o.selectedDoctor.accountStatus||"Pending"),3)]),t[14]||(t[14]=e("div",{class:"mt-4"},null,-1))])):(i(),c("div",_e,"Aucun docteur sélectionné."))])])):d("v-if",!0)])}const Ne=F(U,[["render",ve],["__file","D:/sambatechpro/masanteplus-back/inertia/pages/dashboard/geredocteur.vue"]]);export{Ne as default};
