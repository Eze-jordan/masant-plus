import{c as m,a as b,l as f,b as e,g as K,t as n,i,v as d,h as M,G as U,F as W,D as X,f as N,B as j,r as u,A as C,Q as h}from"./app-x1sq7EG_.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as Z}from"./stethoscope-BEdK2gIW.js";import"./createLucideIcon-VhxeWsbk.js";const $={__name:"geredocteur",props:{user:Object,users:{type:Array,required:!0,default:()=>[]}},setup(E,{expose:t}){t();const k=E,l=u(""),y=u(null),S=u(!1),o=u(!1),v=u(!1),a=u(null),w=u(null),D=u(null),g=u([...k.users]),c=u({firstName:"",lastName:"",phone:"",email:"",specialty:"",registrationNumber:"",accountStatus:"",role:"doctor",profileImage:""}),T=C(()=>g.value.length),L=C(()=>{const s=l.value.toLowerCase();return g.value.filter(r=>{var p,x,_,A,F,P;return((p=r.lastName)==null?void 0:p.toLowerCase().includes(s))||((x=r.firstName)==null?void 0:x.toLowerCase().includes(s))||((_=r.email)==null?void 0:_.toLowerCase().includes(s))||((A=r.registrationNumber)==null?void 0:A.toLowerCase().includes(s))||((F=r.phone)==null?void 0:F.toLowerCase().includes(s))||((P=r.specialty)==null?void 0:P.toLowerCase().includes(s))})});function q(){const s=new FormData;s.append("firstName",c.value.firstName),s.append("lastName",c.value.lastName),s.append("phone",c.value.phone),s.append("email",c.value.email),s.append("specialty",c.value.specialty),s.append("registrationNumber",c.value.registrationNumber),s.append("accountStatus",c.value.accountStatus),s.append("role","doctor"),w.value&&s.append("profileImage",w.value),h.post("/register",s,{forceFormData:!0,headers:{"x-app-key":"boulinguiboulingui"},onSuccess:()=>{I(),S.value=!1},onError:r=>{console.error("Erreur:",r)}})}function G(s){confirm(`Supprimer Dr. ${s.lastName} ${s.firstName} ?`)&&h.delete(`/users/${s.id}`,{onSuccess:()=>{g.value=g.value.filter(r=>r.id!==s.id),y.value=null},headers:{"x-app-key":"boulinguiboulingui"},onError:r=>{console.error("Erreur lors de la suppression:",r)}})}function R(s){y.value=y.value===s?null:s}function z(s){a.value={...s},o.value=!0,v.value=!1}function B(s){a.value={...s},o.value=!0,v.value=!0}function O(){const s=new FormData;s.append("firstName",a.value.firstName),s.append("lastName",a.value.lastName),s.append("phone",a.value.phone),s.append("email",a.value.email),s.append("specialty",a.value.specialty),s.append("registrationNumber",a.value.registrationNumber),s.append("accountStatus",a.value.accountStatus),D.value&&s.append("profileImage",D.value),h.put(`/user/${a.value.id}`,s,{forceFormData:!0,headers:{"x-app-key":"boulinguiboulingui"},onSuccess:()=>{const r=g.value.findIndex(p=>p.id===a.value.id);r!==-1&&(g.value[r]={...a.value}),o.value=!1},onError:r=>{console.error("Erreur lors de la modification:",r)}})}function Q(s){const r=s.target.files[0];if(r){w.value=r;const p=new FileReader;p.onload=x=>{c.value.profileImage=x.target.result},p.readAsDataURL(r)}}function H(s){const r=s.target.files[0];if(r){D.value=r;const p=new FileReader;p.onload=x=>{a.value.profileImage=x.target.result},p.readAsDataURL(r)}}function I(){c.value={firstName:"",lastName:"",phone:"",email:"",specialty:"",registrationNumber:"",accountStatus:"pending",role:"doctor",profileImage:""},w.value=null}function J(s){return["Actif","ACTIVE"].includes(s)?"Actif":["Inactif","INACTIVE"].includes(s)?"Inactif":["pending","PENDING","En attente","Pending"].includes(s)?"En attente":s}const V={props:k,search:l,openMenu:y,showForm:S,showDetails:o,isEditing:v,selectedDocteur:a,photoFile:w,editPhotoFile:D,docteurs:g,form:c,totalDocteurs:T,filteredDocteurs:L,ajouterDocteur:q,supprimer:G,toggleMenu:R,voirPlus:z,modifier:B,enregistrerModif:O,onFileChange:Q,onEditFileChange:H,resetForm:I,statutLabel:J,ref:u,computed:C,get router(){return h},get Stethoscope(){return Z}};return Object.defineProperty(V,"__isScriptSetup",{enumerable:!1,value:!0}),V}},ee={class:"flex justify-between items-center mb-6"},te={class:"mt-2 flex items-center gap-4"},le={class:"bg-white rounded shadow p-4 flex items-center gap-2"},oe={class:"font-bold text-2xl"},se={class:"flex items-center gap-4"},re={key:0,class:"fixed inset-0 z-50 flex"},ne={class:"w-full max-w-md h-full bg-white shadow-lg p-8 relative animate-slide-in-right overflow-y-auto"},ie={class:"mb-4"},ae={class:"mb-4"},de={class:"mb-4"},ue={class:"mb-4"},ce={class:"mb-4"},pe={class:"mb-4"},me={class:"mb-4"},be={class:"mb-4"},fe={key:0,class:"mt-2"},ve=["src"],ge={class:"bg-white rounded shadow p-4"},xe={class:"w-full text-left"},ye={class:"py-2 px-2 flex items-center gap-2"},we=["src"],De={class:"font-bold"},Ne={class:"py-2 px-2"},he={class:"py-2 px-2"},ke={class:"py-2 px-2"},Se={class:"py-2 px-2"},Ce={class:"py-2 px-2"},Ee={class:"py-2 px-2 relative"},Ie=["onClick"],Ve={key:0,class:"absolute right-0 mt-2 w-32 bg-white border rounded shadow z-10"},_e=["onClick"],Ae=["onClick"],Fe=["onClick"],Pe={key:1,class:"fixed inset-0 z-50 flex"},Me={class:"w-full max-w-md h-full bg-white shadow-lg p-8 relative animate-slide-in-right overflow-y-auto"},Ue={class:"text-lg font-bold mb-4"},je={class:"mb-4"},Te={class:"mb-4"},Le={class:"mb-4"},qe={class:"mb-4"},Ge={class:"mb-4"},Re={class:"mb-4"},ze={class:"mb-4"},Be={class:"mb-4"},Oe={key:0,class:"mt-2"},Qe=["src"],He={key:1},Je={class:"mb-4 flex flex-col items-center"},Ke=["src"],We={class:"font-bold text-xl"},Xe={class:"mb-2"},Ye={class:"mb-2"},Ze={class:"mb-2"},$e={class:"mb-2"},et={class:"mb-2"};function tt(E,t,k,l,y,S){return b(),m("div",null,[f(" En-tête "),e("div",ee,[e("div",null,[t[21]||(t[21]=e("h2",{class:"text-xl font-bold"},"Paramètre des médecins",-1)),e("div",te,[e("div",le,[e("span",oe,n(l.totalDocteurs),1),K(l.Stethoscope,{class:"w-6 h-6 text-blue-500"})])])]),e("div",se,[i(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>l.search=o),type:"text",placeholder:"Rechercher un Docteur par Matricule, nom, etc.",class:"px-4 py-2 border rounded-md"},null,512),[[d,l.search]]),e("button",{class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 font-bold",onClick:t[1]||(t[1]=o=>l.showForm=!0)}," + Ajouter un Docteur ")])]),f(" Formulaire d'ajout de docteur "),l.showForm?(b(),m("div",re,[e("div",{class:"flex-1 bg-black bg-opacity-40",onClick:t[2]||(t[2]=o=>l.showForm=!1)}),e("div",ne,[e("button",{class:"absolute top-2 right-2 text-gray-500",onClick:t[3]||(t[3]=o=>l.showForm=!1)},"×"),t[32]||(t[32]=e("h3",{class:"text-lg font-bold mb-4"},"Ajouter un Docteur",-1)),e("form",{onSubmit:M(l.ajouterDocteur,["prevent"])},[e("div",ie,[t[22]||(t[22]=e("label",{class:"block mb-1"},"Nom",-1)),i(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>l.form.lastName=o),type:"text",class:"w-full border rounded px-3 py-2",required:""},null,512),[[d,l.form.lastName]])]),e("div",ae,[t[23]||(t[23]=e("label",{class:"block mb-1"},"Prénom",-1)),i(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>l.form.firstName=o),type:"text",class:"w-full border rounded px-3 py-2",required:""},null,512),[[d,l.form.firstName]])]),e("div",de,[t[24]||(t[24]=e("label",{class:"block mb-1"},"Téléphone",-1)),i(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>l.form.phone=o),type:"text",class:"w-full border rounded px-3 py-2",required:""},null,512),[[d,l.form.phone]])]),e("div",ue,[t[25]||(t[25]=e("label",{class:"block mb-1"},"Email",-1)),i(e("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>l.form.email=o),type:"email",class:"w-full border rounded px-3 py-2",required:""},null,512),[[d,l.form.email]])]),e("div",ce,[t[26]||(t[26]=e("label",{class:"block mb-1"},"Spécialité",-1)),i(e("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>l.form.specialty=o),type:"text",class:"w-full border rounded px-3 py-2",required:""},null,512),[[d,l.form.specialty]])]),e("div",pe,[t[27]||(t[27]=e("label",{class:"block mb-1"},"Matricule",-1)),i(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>l.form.registrationNumber=o),type:"text",class:"w-full border rounded px-3 py-2",required:""},null,512),[[d,l.form.registrationNumber]])]),e("div",me,[t[29]||(t[29]=e("label",{class:"block mb-1"},"Statut",-1)),i(e("select",{"onUpdate:modelValue":t[10]||(t[10]=o=>l.form.accountStatus=o),class:"w-full border rounded px-3 py-2",required:""},t[28]||(t[28]=[e("option",{value:"Actif"},"Actif",-1),e("option",{value:"Inactif"},"Inactif",-1),e("option",{value:"Pending"},"En attente",-1)]),512),[[U,l.form.accountStatus]])]),e("div",be,[t[30]||(t[30]=e("label",{class:"block mb-1"},"Photo",-1)),e("input",{type:"file",onChange:l.onFileChange,class:"w-full border rounded px-3 py-2",accept:"image/*"},null,32),l.form.profileImage?(b(),m("div",fe,[e("img",{src:l.form.profileImage,alt:"Aperçu",class:"w-16 h-16 object-cover rounded"},null,8,ve)])):f("v-if",!0)]),t[31]||(t[31]=e("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 font-bold w-full"}," Ajouter ",-1))],32)])])):f("v-if",!0),f(" Tableau des docteurs "),e("div",ge,[t[35]||(t[35]=e("h3",{class:"font-bold mb-4"},"Liste des docteurs et spécialités",-1)),e("table",xe,[t[34]||(t[34]=e("thead",null,[e("tr",{class:"border-b"},[e("th",{class:"py-2 px-2"},[e("input",{type:"checkbox"})]),e("th",{class:"py-2 px-2"},"Nom"),e("th",{class:"py-2 px-2"},"Prénom"),e("th",{class:"py-2 px-2"},"Téléphone"),e("th",{class:"py-2 px-2"},"Spécialité"),e("th",{class:"py-2 px-2"},"Matricule"),e("th",{class:"py-2 px-2"},"Statut"),e("th",{class:"py-2 px-2"})])],-1)),e("tbody",null,[(b(!0),m(W,null,X(l.filteredDocteurs,o=>(b(),m("tr",{key:o.id,class:"border-b hover:bg-gray-100"},[t[33]||(t[33]=e("td",{class:"py-2 px-2"},[e("input",{type:"checkbox"})],-1)),e("td",ye,[e("img",{src:o.profileImage||"/doctor1.jpg",class:"w-8 h-8 rounded-full object-cover"},null,8,we),e("span",De,"Dr. "+n(o.lastName),1)]),e("td",Ne,n(o.firstName),1),e("td",he,n(o.phone),1),e("td",ke,n(o.specialty),1),e("td",Se,n(o.registrationNumber),1),e("td",Ce,[e("span",{class:j([{"bg-green-100 text-green-800":["Actif","ACTIVE"].includes(o.accountStatus),"bg-red-100 text-red-800":["Inactif","INACTIVE"].includes(o.accountStatus),"bg-yellow-100 text-yellow-800":["pending","PENDING","En attente","Pending"].includes(o.accountStatus)},"px-3 py-1 rounded-full text-xs font-semibold"])},n(l.statutLabel(o.accountStatus)),3)]),e("td",Ee,[e("button",{onClick:v=>l.toggleMenu(o.id),class:"px-2 py-1 rounded hover:bg-gray-200"},"...",8,Ie),l.openMenu===o.id?(b(),m("div",Ve,[e("ul",null,[e("li",{class:"px-4 py-2 hover:bg-blue-100 cursor-pointer",onClick:v=>l.voirPlus(o)},"Voir plus",8,_e),e("li",{class:"px-4 py-2 hover:bg-blue-100 cursor-pointer",onClick:v=>l.modifier(o)},"Modifier",8,Ae),e("li",{class:"px-4 py-2 hover:bg-red-100 text-red-600 cursor-pointer",onClick:v=>l.supprimer(o)},"Supprimer",8,Fe)])])):f("v-if",!0)])]))),128))])])]),f(" Détails / Modifier "),l.showDetails?(b(),m("div",Pe,[e("div",{class:"flex-1 bg-black bg-opacity-40",onClick:t[11]||(t[11]=o=>l.showDetails=!1)}),e("div",Me,[e("button",{class:"absolute top-2 right-2 text-gray-500",onClick:t[12]||(t[12]=o=>l.showDetails=!1)},"×"),e("h3",Ue,n(l.isEditing?"Modifier le Docteur":"Détails du Docteur"),1),l.isEditing?(b(),m("form",{key:0,onSubmit:M(l.enregistrerModif,["prevent"])},[e("div",je,[t[36]||(t[36]=e("label",{class:"block mb-1"},"Nom",-1)),i(e("input",{"onUpdate:modelValue":t[13]||(t[13]=o=>l.selectedDocteur.lastName=o),type:"text",class:"w-full border rounded px-3 py-2"},null,512),[[d,l.selectedDocteur.lastName]])]),e("div",Te,[t[37]||(t[37]=e("label",{class:"block mb-1"},"Prénom",-1)),i(e("input",{"onUpdate:modelValue":t[14]||(t[14]=o=>l.selectedDocteur.firstName=o),type:"text",class:"w-full border rounded px-3 py-2"},null,512),[[d,l.selectedDocteur.firstName]])]),e("div",Le,[t[38]||(t[38]=e("label",{class:"block mb-1"},"Téléphone",-1)),i(e("input",{"onUpdate:modelValue":t[15]||(t[15]=o=>l.selectedDocteur.phone=o),type:"text",class:"w-full border rounded px-3 py-2"},null,512),[[d,l.selectedDocteur.phone]])]),e("div",qe,[t[39]||(t[39]=e("label",{class:"block mb-1"},"Email",-1)),i(e("input",{"onUpdate:modelValue":t[16]||(t[16]=o=>l.selectedDocteur.email=o),type:"email",class:"w-full border rounded px-3 py-2"},null,512),[[d,l.selectedDocteur.email]])]),e("div",Ge,[t[40]||(t[40]=e("label",{class:"block mb-1"},"Spécialité",-1)),i(e("input",{"onUpdate:modelValue":t[17]||(t[17]=o=>l.selectedDocteur.specialty=o),type:"text",class:"w-full border rounded px-3 py-2"},null,512),[[d,l.selectedDocteur.specialty]])]),e("div",Re,[t[41]||(t[41]=e("label",{class:"block mb-1"},"Matricule",-1)),i(e("input",{"onUpdate:modelValue":t[18]||(t[18]=o=>l.selectedDocteur.registrationNumber=o),type:"text",class:"w-full border rounded px-3 py-2"},null,512),[[d,l.selectedDocteur.registrationNumber]])]),e("div",ze,[t[43]||(t[43]=e("label",{class:"block mb-1"},"Statut",-1)),i(e("select",{"onUpdate:modelValue":t[19]||(t[19]=o=>l.selectedDocteur.accountStatus=o),class:"w-full border rounded px-3 py-2"},t[42]||(t[42]=[e("option",{value:"ACTIVE"},"Actif",-1),e("option",{value:"INACTIVE"},"Inactif",-1),e("option",{value:"PENDING"},"En attente",-1)]),512),[[U,l.selectedDocteur.accountStatus]])]),e("div",Be,[t[44]||(t[44]=e("label",{class:"block mb-1"},"Photo",-1)),e("input",{type:"file",onChange:l.onEditFileChange,class:"w-full border rounded px-3 py-2",accept:"image/*"},null,32),l.selectedDocteur.profileImage?(b(),m("div",Oe,[e("img",{src:l.selectedDocteur.profileImage,alt:"Aperçu",class:"w-16 h-16 object-cover rounded"},null,8,Qe)])):f("v-if",!0)]),t[45]||(t[45]=e("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 font-bold w-full"}," Enregistrer ",-1))],32)):(b(),m("div",He,[e("div",Je,[e("img",{src:l.selectedDocteur.profileImage||"/doctor1.jpg",class:"w-24 h-24 rounded-full object-cover mb-2"},null,8,Ke),e("span",We,"Dr. "+n(l.selectedDocteur.lastName)+" "+n(l.selectedDocteur.firstName),1)]),e("div",Xe,[t[46]||(t[46]=e("b",null,"Téléphone :",-1)),N(" "+n(l.selectedDocteur.phone),1)]),e("div",Ye,[t[47]||(t[47]=e("b",null,"Email :",-1)),N(" "+n(l.selectedDocteur.email),1)]),e("div",Ze,[t[48]||(t[48]=e("b",null,"Spécialité :",-1)),N(" "+n(l.selectedDocteur.specialty),1)]),e("div",$e,[t[49]||(t[49]=e("b",null,"Matricule :",-1)),N(" "+n(l.selectedDocteur.registrationNumber),1)]),e("div",et,[t[50]||(t[50]=e("b",null,"Statut :",-1)),e("span",{class:j([{"bg-green-100 text-green-800":["Actif","ACTIVE"].includes(l.selectedDocteur.accountStatus),"bg-red-100 text-red-800":["Inactif","INACTIVE"].includes(l.selectedDocteur.accountStatus),"bg-yellow-100 text-yellow-800":["pending","PENDING","En attente","Pending"].includes(l.selectedDocteur.accountStatus)},"px-3 py-1 rounded-full text-xs font-semibold ml-2"])},n(l.statutLabel(l.selectedDocteur.accountStatus)),3)]),e("button",{class:"mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 font-bold w-full",onClick:t[20]||(t[20]=o=>l.isEditing=!0)}," Modifier ")]))])])):f("v-if",!0)])}const nt=Y($,[["render",tt],["__file","C:/Users/HP/masanteplus-back/inertia/pages/dashboard/geredocteur.vue"]]);export{nt as default};
